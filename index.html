<!DOCTYPE html>
<!--html>
<head>
  <meta charset="UTF-8">
  <title>TK - Technological Kapoo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="TK">
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="icon" href="favicon.ico">
  <style>
    /* General CSS: */
    body {
      font-family: ubuntu, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }
    .noselect, .page-list {
      cursor: default;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* Heading CSS: */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 200;
    }
    h1 {
      border-bottom: 1px solid #ddd;
      white-space:nowrap;
    }
    @media screen and (max-width: 400px) {
      h1 {
        font-size: 8vw;
      }
    }
    h2 {
      color: hsl(0, 0%, 30%);
    }
    
    /* List CSS: */
    ul {
      list-style:none;
      margin-top:0px;
    }
    li {
      color: #337ab7;
      padding-left: 1em;
      text-indent: -.7em;
      height:45px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    li:before {
      content: "–";
      color: #bbb;
      margin-right: 10px;
    }
    li span {
      display: inline-block; padding: 10px 15px;
      text-decoration: none;
      user-select: none;
      position: relative;
    }
    
    /* Links CSS */
    a {
      cursor:pointer;
    }
    /*a:hover {
      color: #295d8a;
    }
    a:active {
      color: #1d3c56;
      text-decoration: underline;
    }*/
    
    /* Ripple ink CSS: */
    .ink {
      display: block; position: absolute;
      background: hsl(180, 40%, 80%);
      border-radius: 100%;
      transform: scale(0);
    }
    
    .ink.animate {animation: ripple 0.65s linear;}
    @keyframes ripple {
      100% {opacity: 0; transform: scale(2.5);}
    }
  </style>
</head>
<body>

  <h1>TK — Technological Kapoo</h1>

  <h2>Sider:</h2>
  <h5>Loading...</h5>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script>
    $.getJSON("https://api.github.com/repos/tjespe/tk/contents/files?"+Date.now(), function(data) {
      var items = [];
      $.each(data, function(key, val) {
        items.push("<li><span>" + val.name + "</span></li>");
      });
      $("<ul/>", {
        "class": "page-list",
        html: items.join("")
      }).appendTo("body");
      $('h5').remove();

      bindEvents();
    });

    function bindEvents() {
      $('.page-list>li').click(function() {
	var filename = $(this)[0].textContent;
	setTimeout(function(){
	  window.location.href = "https://tjespe.github.io/tk/files/" + filename;
	 }, 500);
      });
      //jQuery time
      var parent, ink, d, x, y;
      $(".page-list>li").on("click touchstart", function(e) {
        parent = $(this);
        //create .ink element if it doesn't exist
        if (parent.find(".ink").length == 0)
          parent.prepend("<span class='ink'></span>");

        ink = parent.find(".ink");
        //incase of quick double clicks stop the previous animation
        ink.removeClass("animate");

        //set size of .ink
        if (!ink.height() && !ink.width()) {
          //use parent's width or height whichever is larger for the diameter to make a circle which can cover the entire element.
          d = Math.max(parent.outerWidth(), parent.outerHeight());
          ink.css({
            height: d,
            width: d
          });
        }

        //get click coordinates
        //logic = click coordinates relative to page - parent's position relative to page - half of self height/width to make it controllable from the center;
        x = e.pageX - parent.offset().left - ink.width() / 2;
        y = e.pageY - parent.offset().top - ink.height() / 2;

        //set the position and add class .animate
        ink.css({
          top: y + 'px',
          left: x + 'px'
        }).addClass("animate");
      })
    }
  </script>

</body>
</html>
